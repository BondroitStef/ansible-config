server {
  listen 80;
  server_name .events.ugent.be;

  return 301 https://$server_name$request_uri;
}

server {
  listen 443 ssl;
  server_name .events.ugent.be;

  root /home/events/production/current/public/;

  ####################
  # SSL OPTIONS
  ####################
  ssl_certificate     /etc/letsencrypt/live/events.ugent.be/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/events.ugent.be/privkey.pem;

  include snippets/letsencrypt.conf;
  include snippets/ssl_options.conf;

  ####################
  # LOCATIONS
  ####################

  location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires 1y;
    add_header Cache-Control public;
  }

  ####################
  # MISC OPTIONS
  ####################

  send_timeout 300s;

  passenger_enabled on;

  access_log /home/events/log/access.log;
  error_log /home/events/log/error.log;
}
